<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Monkeyé£æ ¼ - æ·±åº¦å‰–ææ¼”ç¤º</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            line-height: 1.6;
        }

        /* ä¸“ä¸šå¸ƒå±€å®¹å™¨ */
        .survey-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 24px;
            min-height: 100vh;
        }

        /* å¤´éƒ¨ */
        .survey-header {
            background: white;
            border: 1px solid #e1e4e8;
            border-radius: 8px;
            padding: 40px;
            margin-bottom: 32px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .header-title {
            font-size: 36px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 16px;
        }

        .header-subtitle {
            font-size: 18px;
            color: #5a6c7d;
            margin-bottom: 32px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        /* é«˜çº§è¿›åº¦æŒ‡ç¤ºå™¨ */
        .progress-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .progress-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .progress-stats {
            display: flex;
            gap: 24px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 600;
            color: #0366d6;
        }

        .stat-label {
            font-size: 12px;
            color: #5a6c7d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar-container {
            height: 16px;
            background: #e9ecef;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin-bottom: 12px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #0366d6, #28a745, #ffc107);
            border-radius: 8px;
            transition: width 0.5s ease;
            width: 8.33%;
            position: relative;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            animation: shimmer 2s infinite;
        }

        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .progress-stages {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
        }

        .stage-marker {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            color: #6c757d;
        }

        .stage-marker.active {
            color: #0366d6;
            font-weight: 600;
        }

        .stage-marker.completed {
            color: #28a745;
        }

        /* è¿”å›æŒ‰é’® */
        .back-button {
            background: white;
            border: 1px solid #d1d5da;
            border-radius: 6px;
            padding: 10px 16px;
            font-size: 14px;
            color: #0366d6;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 32px;
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .back-button:hover {
            background: #f6f8fa;
            border-color: #0366d6;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(3, 102, 214, 0.15);
        }

        /* åˆ†ç»„ä¸“ä¸šå¸ƒå±€ */
        .section-container {
            background: white;
            border: 1px solid #e1e4e8;
            border-radius: 8px;
            margin-bottom: 32px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, #0366d6, #28a745);
            color: white;
            padding: 32px 40px;
            position: relative;
        }

        .section-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .section-info {
            position: relative;
            z-index: 1;
        }

        .section-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .section-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .section-subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 16px;
        }

        .section-progress {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 14px;
            display: inline-block;
        }

        .section-content {
            padding: 40px;
        }

        /* é—®é¢˜ç»„ */
        .question-group {
            margin-bottom: 48px;
            padding-bottom: 32px;
            border-bottom: 2px solid #f8f9fa;
        }

        .question-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .question-header {
            margin-bottom: 24px;
        }

        .question-number {
            background: #0366d6;
            color: white;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 12px;
        }

        .question-title {
            font-size: 22px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .question-subtitle {
            font-size: 16px;
            color: #5a6c7d;
            margin-bottom: 24px;
        }

        .required-indicator {
            color: #dc3545;
            font-size: 18px;
            margin-left: 8px;
        }

        /* è¯„åˆ†é‡è¡¨ */
        .rating-container {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 24px;
            margin: 20px 0;
        }

        .rating-scale {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            margin-bottom: 16px;
        }

        .rating-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 16px 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
            flex: 1;
            min-width: 60px;
            max-width: 80px;
            background: white;
            border: 1px solid #e9ecef;
        }

        .rating-item:hover {
            background: #e8f4f8;
            border-color: #0366d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(3, 102, 214, 0.15);
        }

        .rating-item.selected {
            background: #0366d6;
            border-color: #0366d6;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(3, 102, 214, 0.3);
        }

        .rating-number {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .rating-label {
            font-size: 12px;
            text-align: center;
            line-height: 1.2;
        }

        .rating-description {
            margin-top: 16px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            font-size: 14px;
            color: #5a6c7d;
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* å¤šé€‰é¢˜ */
        .checkbox-container {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 24px;
            margin: 20px 0;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .checkbox-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .checkbox-option:hover {
            border-color: #0366d6;
            background: #f8f9fa;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(3, 102, 214, 0.15);
        }

        .checkbox-option.selected {
            border-color: #0366d6;
            background: #e8f4f8;
            box-shadow: 0 2px 8px rgba(3, 102, 214, 0.2);
        }

        .checkbox-input {
            width: 18px;
            height: 18px;
            border: 2px solid #6c757d;
            border-radius: 4px;
            position: relative;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .checkbox-option.selected .checkbox-input {
            border-color: #0366d6;
            background: #0366d6;
        }

        .checkbox-option.selected .checkbox-input::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .checkbox-text {
            font-size: 14px;
            color: #2c3e50;
            font-weight: 500;
        }

        .checkbox-option.selected .checkbox-text {
            color: #0366d6;
            font-weight: 600;
        }

        .checkbox-summary {
            margin-top: 16px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            font-size: 14px;
            color: #5a6c7d;
            text-align: center;
        }

        /* é«˜æ•ˆçš„ç”¨æˆ·æµç¨‹ */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 48px;
            padding: 32px 40px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .nav-button {
            border: 1px solid #d1d5da;
            background: white;
            color: #0366d6;
            padding: 14px 28px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-button:hover:not(:disabled) {
            background: #f6f8fa;
            border-color: #0366d6;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(3, 102, 214, 0.15);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-button.primary {
            background: #0366d6;
            color: white;
            border-color: #0366d6;
        }

        .nav-button.primary:hover:not(:disabled) {
            background: #0256cc;
            border-color: #0256cc;
            box-shadow: 0 4px 12px rgba(3, 102, 214, 0.3);
        }

        /* éªŒè¯æ¶ˆæ¯ */
        .validation-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 14px;
            margin-top: 16px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .validation-message.show {
            display: block;
        }

        .validation-message::before {
            content: 'âš ï¸ ';
            margin-right: 8px;
        }

        /* ç»“æœé¡µé¢ */
        .result-container {
            background: white;
            border: 1px solid #e1e4e8;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .result-header {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 48px 40px;
            text-align: center;
            position: relative;
        }

        .result-header::before {
            content: 'ğŸ‰';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            opacity: 0.3;
        }

        .result-icon {
            font-size: 72px;
            margin-bottom: 24px;
            opacity: 0.9;
        }

        .result-title {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .result-subtitle {
            font-size: 18px;
            opacity: 0.9;
        }

        .result-content {
            padding: 48px 40px;
            text-align: center;
        }

        .result-description {
            font-size: 18px;
            color: #5a6c7d;
            line-height: 1.6;
            max-width: 700px;
            margin: 0 auto 40px;
        }

        .result-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-button {
            background: #0366d6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .action-button:hover {
            background: #0256cc;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(3, 102, 214, 0.3);
        }

        .action-button.secondary {
            background: white;
            color: #0366d6;
            border: 1px solid #d1d5da;
        }

        .action-button.secondary:hover {
            background: #f6f8fa;
            border-color: #0366d6;
            box-shadow: 0 2px 6px rgba(3, 102, 214, 0.15);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0% { transform: translateX(-20px); }
            100% { transform: translateX(20px); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .survey-container {
                padding: 20px 16px;
            }

            .survey-header,
            .section-content,
            .result-content {
                padding: 24px 20px;
            }

            .section-header {
                padding: 24px 20px;
            }

            .header-title,
            .result-title {
                font-size: 28px;
            }

            .section-title {
                font-size: 24px;
            }

            .question-title {
                font-size: 18px;
            }

            .progress-stats {
                gap: 16px;
            }

            .rating-scale {
                gap: 4px;
            }

            .rating-item {
                min-width: 50px;
                max-width: 60px;
                padding: 12px 6px;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .checkbox-option {
                padding: 12px 16px;
            }

            .navigation {
                flex-direction: column;
                gap: 16px;
                padding: 24px 20px;
            }

            .nav-button {
                width: 100%;
                justify-content: center;
            }

            .result-actions {
                flex-direction: column;
                align-items: center;
            }

            .action-button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <!-- è¿”å›æŒ‰é’® -->
        <a href="health-tcm-constitution.html" class="back-button">
            <i class="fas fa-arrow-left"></i>
            è¿”å›ä½“è´¨æµ‹è¯•
        </a>

        <!-- å¤´éƒ¨ -->
        <div class="survey-header">
            <h1 class="header-title">ç»¼åˆå¥åº·æ·±åº¦å‰–æ</h1>
            <p class="header-subtitle">
                å…¨é¢çš„å¥åº·è¯„ä¼°ç³»ç»Ÿï¼Œæ·±å…¥åˆ†ææ‚¨çš„ä½“è´¨ç‰¹å¾ã€ç”Ÿæ´»æ–¹å¼ã€å¿ƒç†çŠ¶æ€å’Œç¯å¢ƒé€‚åº”èƒ½åŠ›ã€‚
                é€šè¿‡å¤šç»´åº¦çš„ä¸“ä¸šè¯„ä¼°ï¼Œä¸ºæ‚¨æä¾›æœ€å…¨é¢çš„å¥åº·åˆ†ææŠ¥å‘Šå’Œä¸ªæ€§åŒ–è°ƒç†æ–¹æ¡ˆã€‚
            </p>
            
            <div class="progress-section">
                <div class="progress-header">
                    <div class="progress-title">è¯„ä¼°è¿›åº¦æ€»è§ˆ</div>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="currentStage">1</div>
                            <div class="stat-label">å½“å‰é˜¶æ®µ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalQuestions">12</div>
                            <div class="stat-label">æ€»é¢˜æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completedQuestions">0</div>
                            <div class="stat-label">å·²å®Œæˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">15</div>
                            <div class="stat-label">é¢„è®¡åˆ†é’Ÿ</div>
                        </div>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progressBarFill"></div>
                    <div class="progress-percentage" id="progressPercentage">8%</div>
                </div>
                <div class="progress-stages">
                    <div class="stage-marker active">ä½“è´¨åˆ†æ</div>
                    <div class="stage-marker">ç”Ÿæ´»æ–¹å¼</div>
                    <div class="stage-marker">å¿ƒç†çŠ¶æ€</div>
                    <div class="stage-marker">ç¯å¢ƒé€‚åº”</div>
                </div>
            </div>
        </div>

        <!-- ç¬¬ä¸€é˜¶æ®µï¼šä½“è´¨åˆ†æ -->
        <div class="section-container" id="section-0">
            <div class="section-header">
                <div class="section-info">
                    <div class="section-badge">é˜¶æ®µ 1</div>
                    <h2 class="section-title">ä½“è´¨åˆ†æ</h2>
                    <p class="section-subtitle">è¯„ä¼°æ‚¨çš„åŸºç¡€ä½“è´¨ç‰¹å¾å’Œèº«ä½“çŠ¶å†µ</p>
                    <div class="section-progress">3 ä¸ªé—®é¢˜ Â· é¢„è®¡ 4 åˆ†é’Ÿ</div>
                </div>
            </div>
            <div class="section-content">
                <!-- é—®é¢˜1 -->
                <div class="question-group">
                    <div class="question-header">
                        <div class="question-number">é—®é¢˜ 1</div>
                        <h3 class="question-title">
                            æ‚¨çš„æ•´ä½“ç²¾ç¥çŠ¶æ€å¦‚ä½•ï¼Ÿ
                            <span class="required-indicator">*</span>
                        </h3>
                        <p class="question-subtitle">è¯·æ ¹æ®æ‚¨æœ€è¿‘ä¸‰ä¸ªæœˆçš„å®é™…æƒ…å†µä½œç­”</p>
                    </div>
                    
                    <div class="rating-container">
                        <div class="rating-scale" id="rating-0-0">
                            <div class="rating-item" onclick="selectRating(0, 0, 0)">
                                <div class="rating-number">1</div>
                                <div class="rating-label">å¾ˆå·®</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 0, 1)">
                                <div class="rating-number">2</div>
                                <div class="rating-label">è¾ƒå·®</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 0, 2)">
                                <div class="rating-number">3</div>
                                <div class="rating-label">ä¸€èˆ¬</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 0, 3)">
                                <div class="rating-number">4</div>
                                <div class="rating-label">è¾ƒå¥½</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 0, 4)">
                                <div class="rating-number">5</div>
                                <div class="rating-label">å¾ˆå¥½</div>
                            </div>
                        </div>
                        <div class="rating-description" id="desc-0-0">
                            è¯·é€‰æ‹©æœ€ç¬¦åˆæ‚¨å½“å‰ç²¾ç¥çŠ¶æ€çš„é€‰é¡¹
                        </div>
                    </div>
                    
                    <div class="validation-message" id="validation-0-0">
                        è¯·é€‰æ‹©æœ€ç¬¦åˆæ‚¨æƒ…å†µçš„é€‰é¡¹
                    </div>
                </div>

                <!-- é—®é¢˜2 -->
                <div class="question-group">
                    <div class="question-header">
                        <div class="question-number">é—®é¢˜ 2</div>
                        <h3 class="question-title">
                            æ‚¨çš„ç¡çœ è´¨é‡å¦‚ä½•ï¼Ÿ
                            <span class="required-indicator">*</span>
                        </h3>
                        <p class="question-subtitle">åŒ…æ‹¬å…¥ç¡æ—¶é—´ã€ç¡çœ æ·±åº¦å’Œé†’åæ„Ÿå—</p>
                    </div>
                    
                    <div class="rating-container">
                        <div class="rating-scale" id="rating-0-1">
                            <div class="rating-item" onclick="selectRating(0, 1, 0)">
                                <div class="rating-number">1</div>
                                <div class="rating-label">å¾ˆå·®</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 1, 1)">
                                <div class="rating-number">2</div>
                                <div class="rating-label">è¾ƒå·®</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 1, 2)">
                                <div class="rating-number">3</div>
                                <div class="rating-label">ä¸€èˆ¬</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 1, 3)">
                                <div class="rating-number">4</div>
                                <div class="rating-label">è¾ƒå¥½</div>
                            </div>
                            <div class="rating-item" onclick="selectRating(0, 1, 4)">
                                <div class="rating-number">5</div>
                                <div class="rating-label">å¾ˆå¥½</div>
                            </div>
                        </div>
                        <div class="rating-description" id="desc-0-1">
                            è¯·é€‰æ‹©æœ€ç¬¦åˆæ‚¨ç¡çœ è´¨é‡çš„é€‰é¡¹
                        </div>
                    </div>
                    
                    <div class="validation-message" id="validation-0-1">
                        è¯·é€‰æ‹©æœ€ç¬¦åˆæ‚¨æƒ…å†µçš„é€‰é¡¹
                    </div>
                </div>

                <!-- é—®é¢˜3 -->
                <div class="question-group">
                    <div class="question-header">
                        <div class="question-number">é—®é¢˜ 3</div>
                        <h3 class="question-title">
                            æ‚¨æœ‰å“ªäº›ä½“è´¨ç‰¹å¾ï¼Ÿ
                            <span class="required-indicator">*</span>
                        </h3>
                        <p class="question-subtitle">è¯·é€‰æ‹©æ‰€æœ‰é€‚ç”¨çš„é€‰é¡¹ï¼ˆå¯å¤šé€‰ï¼‰</p>
                    </div>
                    
                    <div class="checkbox-container">
                        <div class="checkbox-grid" id="checkbox-0-2">
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 0)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">å®¹æ˜“ç–²å€¦</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 1)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">æ€•å†·</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 2)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">æ€•çƒ­</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 3)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">æ‰‹è„šå†°å‡‰</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 4)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">å®¹æ˜“å‡ºæ±—</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 5)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">çš®è‚¤å¹²ç‡¥</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 6)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">å…¶ä»–</div>
                            </div>
                            <div class="checkbox-option" onclick="toggleCheckbox(0, 2, 7)">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">æ— </div>
                            </div>
                        </div>
                        <div class="checkbox-summary" id="summary-0-2">
                            å·²é€‰æ‹© 0 é¡¹ä½“è´¨ç‰¹å¾
                        </div>
                    </div>
                    
                    <div class="validation-message" id="validation-0-2">
                        è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªé€‰é¡¹
                    </div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="nav-button" style="visibility: hidden;">
                    <i class="fas fa-arrow-left"></i>
                    ä¸Šä¸€é˜¶æ®µ
                </button>
                <button class="nav-button primary" id="nextBtn" onclick="nextSection()" disabled>
                    ä¸‹ä¸€é˜¶æ®µ
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- å…¶ä»–é˜¶æ®µå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->

        <!-- ç»“æœé¡µé¢ -->
        <div class="result-container" id="result" style="display: none;">
            <div class="result-header">
                <div class="result-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 class="result-title">æ·±åº¦å‰–æå®Œæˆ</h2>
                <p class="result-subtitle">æ‚¨çš„ç»¼åˆå¥åº·è¯„ä¼°æŠ¥å‘Šå·²ç”Ÿæˆ</p>
            </div>
            <div class="result-content">
                <p class="result-description">
                    æ­å–œæ‚¨å®Œæˆäº†å…¨é¢çš„ç»¼åˆå¥åº·æ·±åº¦å‰–æï¼æˆ‘ä»¬å·²ç»ä»ä½“è´¨åˆ†æã€ç”Ÿæ´»æ–¹å¼ã€å¿ƒç†çŠ¶æ€å’Œç¯å¢ƒé€‚åº”å››ä¸ªç»´åº¦
                    å¯¹æ‚¨çš„å¥åº·çŠ¶å†µè¿›è¡Œäº†æ·±å…¥è¯„ä¼°ã€‚åŸºäºæ‚¨çš„è¯¦ç»†å›ç­”ï¼Œæˆ‘ä»¬ç”Ÿæˆäº†åŒ…å«ä¸ªæ€§åŒ–è°ƒç†å»ºè®®ã€å¥åº·ç®¡ç†æ–¹æ¡ˆ
                    å’Œç”Ÿæ´»æŒ‡å¯¼çš„å®Œæ•´æŠ¥å‘Šã€‚æ‚¨å¯ä»¥ä¸‹è½½å®Œæ•´çš„PDFæŠ¥å‘Šæˆ–åˆ†äº«ç»™ä¸“ä¸šåŒ»å¸ˆå‚è€ƒã€‚
                </p>
                <div class="result-actions">
                    <button onclick="generateReport()" class="action-button">
                        <i class="fas fa-file-pdf"></i>
                        ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
                    </button>
                    <button onclick="shareReport()" class="action-button secondary">
                        <i class="fas fa-share-alt"></i>
                        åˆ†äº«æŠ¥å‘Š
                    </button>
                    <a href="health-tcm-constitution.html" class="action-button secondary">
                        <i class="fas fa-arrow-left"></i>
                        è¿”å›é€‰æ‹©
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é—®é¢˜æ•°æ®ï¼ˆåˆ†ä¸º4ä¸ªé˜¶æ®µï¼‰
        const sections = [
            {
                title: "ä½“è´¨åˆ†æ",
                subtitle: "è¯„ä¼°æ‚¨çš„åŸºç¡€ä½“è´¨ç‰¹å¾å’Œèº«ä½“çŠ¶å†µ",
                questions: [
                    {
                        title: "æ‚¨çš„æ•´ä½“ç²¾ç¥çŠ¶æ€å¦‚ä½•ï¼Ÿ",
                        subtitle: "è¯·æ ¹æ®æ‚¨æœ€è¿‘ä¸‰ä¸ªæœˆçš„å®é™…æƒ…å†µä½œç­”",
                        type: "rating",
                        descriptions: [
                            "ç²¾ç¥çŠ¶æ€å¾ˆå·®ï¼Œç»å¸¸æ„Ÿåˆ°ç–²å€¦å’Œæ— åŠ›",
                            "ç²¾ç¥çŠ¶æ€è¾ƒå·®ï¼Œå¶å°”æ„Ÿåˆ°ç–²å€¦",
                            "ç²¾ç¥çŠ¶æ€ä¸€èˆ¬ï¼Œæ— ç‰¹åˆ«æ„Ÿå—",
                            "ç²¾ç¥çŠ¶æ€è¾ƒå¥½ï¼Œå¤§å¤šæ•°æ—¶å€™ç²¾åŠ›å……æ²›",
                            "ç²¾ç¥çŠ¶æ€å¾ˆå¥½ï¼Œå§‹ç»ˆä¿æŒæ´»åŠ›"
                        ]
                    },
                    {
                        title: "æ‚¨çš„ç¡çœ è´¨é‡å¦‚ä½•ï¼Ÿ",
                        subtitle: "åŒ…æ‹¬å…¥ç¡æ—¶é—´ã€ç¡çœ æ·±åº¦å’Œé†’åæ„Ÿå—",
                        type: "rating",
                        descriptions: [
                            "ç¡çœ è´¨é‡å¾ˆå·®ï¼Œç»å¸¸å¤±çœ æˆ–ç¡ä¸æ·±",
                            "ç¡çœ è´¨é‡è¾ƒå·®ï¼Œå¶å°”å¤±çœ ",
                            "ç¡çœ è´¨é‡ä¸€èˆ¬ï¼Œæ— ç‰¹åˆ«é—®é¢˜",
                            "ç¡çœ è´¨é‡è¾ƒå¥½ï¼Œèƒ½å¤Ÿæ­£å¸¸å…¥ç¡",
                            "ç¡çœ è´¨é‡å¾ˆå¥½ï¼Œé†’åç²¾ç¥é¥±æ»¡"
                        ]
                    },
                    {
                        title: "æ‚¨æœ‰å“ªäº›ä½“è´¨ç‰¹å¾ï¼Ÿ",
                        subtitle: "è¯·é€‰æ‹©æ‰€æœ‰é€‚ç”¨çš„é€‰é¡¹ï¼ˆå¯å¤šé€‰ï¼‰",
                        type: "checkbox",
                        options: ["å®¹æ˜“ç–²å€¦", "æ€•å†·", "æ€•çƒ­", "æ‰‹è„šå†°å‡‰", "å®¹æ˜“å‡ºæ±—", "çš®è‚¤å¹²ç‡¥", "å…¶ä»–", "æ— "]
                    }
                ]
            },
            {
                title: "ç”Ÿæ´»æ–¹å¼",
                subtitle: "è¯„ä¼°æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»ä¹ æƒ¯å’Œè¡Œä¸ºæ¨¡å¼",
                questions: [
                    {
                        title: "æ‚¨æ¯å‘¨è¿åŠ¨å‡ æ¬¡ï¼Ÿ",
                        subtitle: "åŒ…æ‹¬å„ç§å½¢å¼çš„ä½“è‚²é”»ç‚¼å’Œè¿åŠ¨",
                        type: "rating",
                        descriptions: [
                            "ä»ä¸è¿åŠ¨ï¼Œå®Œå…¨ç¼ºä¹ä½“è‚²é”»ç‚¼",
                            "å¾ˆå°‘è¿åŠ¨ï¼Œå¶å°”è¿›è¡Œè½»åº¦æ´»åŠ¨",
                            "é€‚é‡è¿åŠ¨ï¼Œæ¯å‘¨2-3æ¬¡",
                            "ç»å¸¸è¿åŠ¨ï¼Œæ¯å‘¨4-5æ¬¡",
                            "é¢‘ç¹è¿åŠ¨ï¼Œå‡ ä¹æ¯å¤©éƒ½é”»ç‚¼"
                        ]
                    },
                    {
                        title: "æ‚¨çš„é¥®é£Ÿä¹ æƒ¯å¦‚ä½•ï¼Ÿ",
                        subtitle: "è¯„ä¼°é¥®é£Ÿçš„è§„å¾‹æ€§å’Œè¥å…»å‡è¡¡",
                        type: "rating",
                        descriptions: [
                            "é¥®é£Ÿå¾ˆä¸è§„å¾‹ï¼Œè¥å…»ä¸å‡è¡¡",
                            "é¥®é£Ÿè¾ƒä¸è§„å¾‹ï¼Œå¶å°”æ³¨æ„è¥å…»",
                            "é¥®é£ŸåŸºæœ¬è§„å¾‹ï¼Œè¥å…»ä¸€èˆ¬",
                            "é¥®é£Ÿæ¯”è¾ƒè§„å¾‹ï¼Œæ³¨æ„è¥å…»æ­é…",
                            "é¥®é£Ÿéå¸¸è§„å¾‹ï¼Œè¥å…»å‡è¡¡"
                        ]
                    },
                    {
                        title: "æ‚¨æœ‰å“ªäº›ä¸è‰¯ç”Ÿæ´»ä¹ æƒ¯ï¼Ÿ",
                        subtitle: "è¯·é€‰æ‹©æ‰€æœ‰é€‚ç”¨çš„é€‰é¡¹ï¼ˆå¯å¤šé€‰ï¼‰",
                        type: "checkbox",
                        options: ["å¸çƒŸ", "è¿‡é‡é¥®é…’", "ç†¬å¤œ", "ä¹…åä¸åŠ¨", "é¥®é£Ÿä¸è§„å¾‹", "å‹åŠ›è¿‡å¤§", "å…¶ä»–", "æ— "]
                    }
                ]
            },
            {
                title: "å¿ƒç†çŠ¶æ€",
                subtitle: "è¯„ä¼°æ‚¨çš„å¿ƒç†å¥åº·å’Œæƒ…ç»ªçŠ¶å†µ",
                questions: [
                    {
                        title: "æ‚¨æœ€è¿‘çš„å¿ƒæƒ…å¦‚ä½•ï¼Ÿ",
                        subtitle: "è¯„ä¼°æ‚¨çš„æ•´ä½“æƒ…ç»ªçŠ¶æ€",
                        type: "rating",
                        descriptions: [
                            "å¿ƒæƒ…å¾ˆç³Ÿç³•ï¼Œç»å¸¸æ„Ÿåˆ°æ²®ä¸§æˆ–ç„¦è™‘",
                            "å¿ƒæƒ…è¾ƒå·®ï¼Œå¶å°”æ„Ÿåˆ°ä¸å¼€å¿ƒ",
                            "å¿ƒæƒ…ä¸€èˆ¬ï¼Œæƒ…ç»ªæ¯”è¾ƒå¹³ç¨³",
                            "å¿ƒæƒ…è¾ƒå¥½ï¼Œå¤§å¤šæ•°æ—¶å€™æ„‰å¿«",
                            "å¿ƒæƒ…å¾ˆå¥½ï¼Œç»å¸¸æ„Ÿåˆ°å¿«ä¹å’Œæ»¡è¶³"
                        ]
                    },
                    {
                        title: "æ‚¨çš„å‹åŠ›æ°´å¹³å¦‚ä½•ï¼Ÿ",
                        subtitle: "æ¥è‡ªå·¥ä½œã€ç”Ÿæ´»ç­‰å„æ–¹é¢çš„å‹åŠ›",
                        type: "rating",
                        descriptions: [
                            "å‹åŠ›å¾ˆå¤§ï¼Œç»å¸¸æ„Ÿåˆ°ä¸å ªé‡è´Ÿ",
                            "å‹åŠ›è¾ƒå¤§ï¼Œæœ‰æ—¶æ„Ÿåˆ°ç´§å¼ ",
                            "å‹åŠ›ä¸€èˆ¬ï¼Œèƒ½å¤Ÿæ­£å¸¸åº”å¯¹",
                            "å‹åŠ›è¾ƒå°ï¼Œå¤§å¤šæ•°æ—¶å€™è½»æ¾",
                            "å‹åŠ›å¾ˆå°ï¼Œå‡ ä¹æ²¡æœ‰å‹åŠ›æ„Ÿ"
                        ]
                    },
                    {
                        title: "æ‚¨æœ‰ä»¥ä¸‹å“ªäº›å¿ƒç†ç—‡çŠ¶ï¼Ÿ",
                        subtitle: "è¯·é€‰æ‹©æœ€è¿‘ç»å¸¸å‡ºç°çš„ç—‡çŠ¶ï¼ˆå¯å¤šé€‰ï¼‰",
                        type: "checkbox",
                        options: ["ç„¦è™‘", "æŠ‘éƒ", "å¤±çœ ", "æ³¨æ„åŠ›ä¸é›†ä¸­", "æ˜“æ€’", "ç–²åŠ³", "å…¶ä»–", "æ— "]
                    }
                ]
            },
            {
                title: "ç¯å¢ƒé€‚åº”",
                subtitle: "è¯„ä¼°æ‚¨å¯¹ç¯å¢ƒå˜åŒ–çš„é€‚åº”èƒ½åŠ›",
                questions: [
                    {
                        title: "æ‚¨å¯¹ç¯å¢ƒå˜åŒ–çš„é€‚åº”èƒ½åŠ›ï¼Ÿ",
                        subtitle: "åŒ…æ‹¬æ°”å€™ã€å·¥ä½œç¯å¢ƒç­‰å˜åŒ–çš„é€‚åº”",
                        type: "rating",
                        descriptions: [
                            "é€‚åº”èƒ½åŠ›å¾ˆå·®ï¼Œå¯¹ç¯å¢ƒå˜åŒ–å¾ˆæ•æ„Ÿ",
                            "é€‚åº”èƒ½åŠ›è¾ƒå·®ï¼Œéœ€è¦è¾ƒé•¿æ—¶é—´é€‚åº”",
                            "é€‚åº”èƒ½åŠ›ä¸€èˆ¬ï¼Œèƒ½å¤Ÿé€æ­¥é€‚åº”",
                            "é€‚åº”èƒ½åŠ›è¾ƒå¥½ï¼Œèƒ½å¤Ÿè¾ƒå¿«é€‚åº”",
                            "é€‚åº”èƒ½åŠ›å¾ˆå¥½ï¼Œèƒ½å¤Ÿè¿…é€Ÿé€‚åº”å„ç§ç¯å¢ƒ"
                        ]
                    },
                    {
                        title: "æ‚¨çš„å·¥ä½œç¯å¢ƒå¦‚ä½•ï¼Ÿ",
                        subtitle: "è¯„ä¼°å·¥ä½œç¯å¢ƒå¯¹å¥åº·çš„å½±å“",
                        type: "rating",
                        descriptions: [
                            "å·¥ä½œç¯å¢ƒå¾ˆå·®ï¼Œå¯¹å¥åº·æœ‰ä¸è‰¯å½±å“",
                            "å·¥ä½œç¯å¢ƒè¾ƒå·®ï¼Œæœ‰ä¸€å®šå¥åº·éšæ‚£",
                            "å·¥ä½œç¯å¢ƒä¸€èˆ¬ï¼ŒåŸºæœ¬æ»¡è¶³éœ€æ±‚",
                            "å·¥ä½œç¯å¢ƒè¾ƒå¥½ï¼Œæœ‰åˆ©äºå¥åº·",
                            "å·¥ä½œç¯å¢ƒå¾ˆå¥½ï¼Œéå¸¸æœ‰åˆ©äºèº«å¿ƒå¥åº·"
                        ]
                    },
                    {
                        title: "æ‚¨è®¤ä¸ºå“ªäº›ç¯å¢ƒå› ç´ å½±å“æ‚¨çš„å¥åº·ï¼Ÿ",
                        subtitle: "è¯·é€‰æ‹©å¯¹æ‚¨å½±å“è¾ƒå¤§çš„å› ç´ ï¼ˆå¯å¤šé€‰ï¼‰",
                        type: "checkbox",
                        options: ["ç©ºæ°”è´¨é‡", "å™ªéŸ³", "å…‰ç…§", "æ¸©åº¦", "æ¹¿åº¦", "å·¥ä½œå‹åŠ›", "å…¶ä»–", "æ— "]
                    }
                ]
            }
        ];

        let currentSection = 0;
        let answers = {};
        let totalQuestions = 0;
        let completedQuestions = 0;

        // è®¡ç®—æ€»é¢˜æ•°
        sections.forEach(section => {
            totalQuestions += section.questions.length;
        });

        // åˆå§‹åŒ–
        function init() {
            // åˆå§‹åŒ–ç­”æ¡ˆå¯¹è±¡
            sections.forEach((section, sectionIndex) => {
                answers[sectionIndex] = {};
                section.questions.forEach((question, questionIndex) => {
                    if (question.type === 'checkbox') {
                        answers[sectionIndex][questionIndex] = [];
                    }
                });
            });
            
            // ç”Ÿæˆå…¶ä»–é˜¶æ®µ
            generateSections();
            // æ›´æ–°æ˜¾ç¤º
            updateProgress();
            updateStageMarkers();
            updateTotalQuestions();
        }

        // ç”Ÿæˆå…¶ä»–é˜¶æ®µ
        function generateSections() {
            const container = document.querySelector('.survey-container');
            const resultContainer = document.getElementById('result');
            
            for (let sectionIndex = 1; sectionIndex < sections.length; sectionIndex++) {
                const section = sections[sectionIndex];
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section-container';
                sectionDiv.id = `section-${sectionIndex}`;
                sectionDiv.style.display = 'none';
                
                let questionsHtml = '';
                section.questions.forEach((question, questionIndex) => {
                    let questionContent = '';
                    const questionNumber = getGlobalQuestionNumber(sectionIndex, questionIndex);
                    
                    if (question.type === 'rating') {
                        const ratingsHtml = Array.from({length: 5}, (_, i) => `
                            <div class="rating-item" onclick="selectRating(${sectionIndex}, ${questionIndex}, ${i})">
                                <div class="rating-number">${i + 1}</div>
                                <div class="rating-label">${['å¾ˆå·®', 'è¾ƒå·®', 'ä¸€èˆ¬', 'è¾ƒå¥½', 'å¾ˆå¥½'][i]}</div>
                            </div>
                        `).join('');
                        
                        questionContent = `
                            <div class="rating-container">
                                <div class="rating-scale" id="rating-${sectionIndex}-${questionIndex}">
                                    ${ratingsHtml}
                                </div>
                                <div class="rating-description" id="desc-${sectionIndex}-${questionIndex}">
                                    è¯·é€‰æ‹©æœ€ç¬¦åˆæ‚¨æƒ…å†µçš„é€‰é¡¹
                                </div>
                            </div>
                        `;
                    } else if (question.type === 'checkbox') {
                        const checkboxHtml = question.options.map((option, index) => `
                            <div class="checkbox-option" onclick="toggleCheckbox(${sectionIndex}, ${questionIndex}, ${index})">
                                <div class="checkbox-input"></div>
                                <div class="checkbox-text">${option}</div>
                            </div>
                        `).join('');
                        
                        questionContent = `
                            <div class="checkbox-container">
                                <div class="checkbox-grid" id="checkbox-${sectionIndex}-${questionIndex}">
                                    ${checkboxHtml}
                                </div>
                                <div class="checkbox-summary" id="summary-${sectionIndex}-${questionIndex}">
                                    å·²é€‰æ‹© 0 é¡¹${section.title === 'ç”Ÿæ´»æ–¹å¼' ? 'ç”Ÿæ´»ä¹ æƒ¯' : section.title === 'å¿ƒç†çŠ¶æ€' ? 'å¿ƒç†ç—‡çŠ¶' : 'ç¯å¢ƒå› ç´ '}
                                </div>
                            </div>
                        `;
                    }
                    
                    questionsHtml += `
                        <div class="question-group">
                            <div class="question-header">
                                <div class="question-number">é—®é¢˜ ${questionNumber}</div>
                                <h3 class="question-title">
                                    ${question.title}
                                    <span class="required-indicator">*</span>
                                </h3>
                                <p class="question-subtitle">${question.subtitle}</p>
                            </div>
                            
                            ${questionContent}
                            
                            <div class="validation-message" id="validation-${sectionIndex}-${questionIndex}">
                                ${question.type === 'checkbox' ? 'è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªé€‰é¡¹' : 'è¯·é€‰æ‹©æœ€ç¬¦åˆæ‚¨æƒ…å†µçš„é€‰é¡¹'}
                            </div>
                        </div>
                    `;
                });
                
                sectionDiv.innerHTML = `
                    <div class="section-header">
                        <div class="section-info">
                            <div class="section-badge">é˜¶æ®µ ${sectionIndex + 1}</div>
                            <h2 class="section-title">${section.title}</h2>
                            <p class="section-subtitle">${section.subtitle}</p>
                            <div class="section-progress">${section.questions.length} ä¸ªé—®é¢˜ Â· é¢„è®¡ ${Math.ceil(section.questions.length * 1.5)} åˆ†é’Ÿ</div>
                        </div>
                    </div>
                    <div class="section-content">
                        ${questionsHtml}
                    </div>
                    <div class="navigation">
                        <button class="nav-button" onclick="prevSection()">
                            <i class="fas fa-arrow-left"></i>
                            ä¸Šä¸€é˜¶æ®µ
                        </button>
                        <button class="nav-button primary" onclick="nextSection()" disabled>
                            ${sectionIndex === sections.length - 1 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€é˜¶æ®µ'}
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                `;
                
                container.insertBefore(sectionDiv, resultContainer);
            }
        }

        // è·å–å…¨å±€é—®é¢˜ç¼–å·
        function getGlobalQuestionNumber(sectionIndex, questionIndex) {
            let questionNumber = 1;
            for (let i = 0; i < sectionIndex; i++) {
                questionNumber += sections[i].questions.length;
            }
            return questionNumber + questionIndex;
        }

        // é€‰æ‹©è¯„åˆ†
        function selectRating(sectionIndex, questionIndex, rating) {
            answers[sectionIndex][questionIndex] = rating;
            
            // æ›´æ–°é€‰é¡¹æ ·å¼
            const ratingContainer = document.getElementById(`rating-${sectionIndex}-${questionIndex}`);
            const items = ratingContainer.querySelectorAll('.rating-item');
            
            items.forEach((item, index) => {
                item.classList.toggle('selected', index === rating);
            });
            
            // æ›´æ–°æè¿°
            const desc = document.getElementById(`desc-${sectionIndex}-${questionIndex}`);
            const question = sections[sectionIndex].questions[questionIndex];
            if (desc && question.descriptions) {
                desc.textContent = question.descriptions[rating];
            }
            
            // éšè—éªŒè¯æ¶ˆæ¯
            const validation = document.getElementById(`validation-${sectionIndex}-${questionIndex}`);
            if (validation) {
                validation.classList.remove('show');
            }
            
            updateNavigationButton();
            updateProgress();
        }

        // åˆ‡æ¢å¤šé€‰é¡¹
        function toggleCheckbox(sectionIndex, questionIndex, optionIndex) {
            if (!answers[sectionIndex][questionIndex]) {
                answers[sectionIndex][questionIndex] = [];
            }
            
            const currentAnswers = answers[sectionIndex][questionIndex];
            const index = currentAnswers.indexOf(optionIndex);
            
            if (index > -1) {
                currentAnswers.splice(index, 1);
            } else {
                currentAnswers.push(optionIndex);
            }
            
            // æ›´æ–°é€‰é¡¹æ ·å¼
            const checkboxContainer = document.getElementById(`checkbox-${sectionIndex}-${questionIndex}`);
            const options = checkboxContainer.querySelectorAll('.checkbox-option');
            
            options.forEach((option, i) => {
                option.classList.toggle('selected', currentAnswers.includes(i));
            });
            
            // æ›´æ–°æ‘˜è¦
            const summary = document.getElementById(`summary-${sectionIndex}-${questionIndex}`);
            const sectionTitle = sections[sectionIndex].title;
            let summaryText = '';
            if (sectionTitle === 'ç”Ÿæ´»æ–¹å¼') {
                summaryText = 'ç”Ÿæ´»ä¹ æƒ¯';
            } else if (sectionTitle === 'å¿ƒç†çŠ¶æ€') {
                summaryText = 'å¿ƒç†ç—‡çŠ¶';
            } else if (sectionTitle === 'ç¯å¢ƒé€‚åº”') {
                summaryText = 'ç¯å¢ƒå› ç´ ';
            } else {
                summaryText = 'ä½“è´¨ç‰¹å¾';
            }
            
            if (summary) {
                summary.textContent = `å·²é€‰æ‹© ${currentAnswers.length} é¡¹${summaryText}`;
            }
            
            // éšè—éªŒè¯æ¶ˆæ¯
            const validation = document.getElementById(`validation-${sectionIndex}-${questionIndex}`);
            if (validation && currentAnswers.length > 0) {
                validation.classList.remove('show');
            }
            
            updateNavigationButton();
            updateProgress();
        }

        // ä¸‹ä¸€é˜¶æ®µ
        function nextSection() {
            // éªŒè¯å½“å‰é˜¶æ®µæ˜¯å¦å®Œæˆ
            if (!validateCurrentSection()) {
                return;
            }

            if (currentSection < sections.length - 1) {
                // éšè—å½“å‰é˜¶æ®µ
                document.getElementById(`section-${currentSection}`).style.display = 'none';
                
                currentSection++;
                
                // æ˜¾ç¤ºä¸‹ä¸€é˜¶æ®µ
                document.getElementById(`section-${currentSection}`).style.display = 'block';
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                updateProgress();
                updateStageMarkers();
                updateNavigationButton();
            } else {
                // æ˜¾ç¤ºç»“æœ
                document.getElementById(`section-${currentSection}`).style.display = 'none';
                document.getElementById('result').style.display = 'block';
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                updateProgress();
                updateStageMarkers();
            }
        }

        // ä¸Šä¸€é˜¶æ®µ
        function prevSection() {
            if (currentSection > 0) {
                // éšè—å½“å‰é˜¶æ®µ
                document.getElementById(`section-${currentSection}`).style.display = 'none';
                
                currentSection--;
                
                // æ˜¾ç¤ºä¸Šä¸€é˜¶æ®µ
                document.getElementById(`section-${currentSection}`).style.display = 'block';
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                updateProgress();
                updateStageMarkers();
                updateNavigationButton();
            }
        }

        // éªŒè¯å½“å‰é˜¶æ®µ
        function validateCurrentSection() {
            const section = sections[currentSection];
            let isValid = true;
            
            section.questions.forEach((question, questionIndex) => {
                const answer = answers[currentSection][questionIndex];
                const validation = document.getElementById(`validation-${currentSection}-${questionIndex}`);
                
                if (question.type === 'rating') {
                    if (answer === undefined) {
                        if (validation) validation.classList.add('show');
                        isValid = false;
                    } else {
                        if (validation) validation.classList.remove('show');
                    }
                } else if (question.type === 'checkbox') {
                    if (!answer || answer.length === 0) {
                        if (validation) validation.classList.add('show');
                        isValid = false;
                    } else {
                        if (validation) validation.classList.remove('show');
                    }
                }
            });
            
            return isValid;
        }

        // æ›´æ–°å¯¼èˆªæŒ‰é’®
        function updateNavigationButton() {
            const nextBtn = document.querySelector(`#section-${currentSection} .nav-button.primary`);
            if (nextBtn) {
                const isCurrentSectionComplete = validateCurrentSection();
                nextBtn.disabled = !isCurrentSectionComplete;
            }
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            // è®¡ç®—å·²å®Œæˆé—®é¢˜æ•°
            let completed = 0;
            sections.forEach((section, sectionIndex) => {
                section.questions.forEach((question, questionIndex) => {
                    const answer = answers[sectionIndex][questionIndex];
                    if (question.type === 'rating' && answer !== undefined) {
                        completed++;
                    } else if (question.type === 'checkbox' && answer && answer.length > 0) {
                        completed++;
                    }
                });
            });
            
            const progress = (completed / totalQuestions) * 100;
            const progressBarFill = document.getElementById('progressBarFill');
            const progressPercentage = document.getElementById('progressPercentage');
            const completedQuestionsElement = document.getElementById('completedQuestions');
            
            if (progressBarFill) progressBarFill.style.width = `${progress}%`;
            if (progressPercentage) progressPercentage.textContent = `${Math.round(progress)}%`;
            if (completedQuestionsElement) completedQuestionsElement.textContent = completed;
            
            completedQuestions = completed;
        }

        // æ›´æ–°é˜¶æ®µæ ‡è®°
        function updateStageMarkers() {
            const markers = document.querySelectorAll('.stage-marker');
            const currentStageElement = document.getElementById('currentStage');
            
            if (currentStageElement) {
                currentStageElement.textContent = currentSection + 1;
            }
            
            markers.forEach((marker, index) => {
                marker.classList.remove('active', 'completed');
                
                if (index < currentSection) {
                    marker.classList.add('completed');
                } else if (index === currentSection) {
                    marker.classList.add('active');
                }
            });
            
            // å¦‚æœå·²å®Œæˆæ‰€æœ‰é˜¶æ®µ
            if (currentSection >= sections.length) {
                markers.forEach(marker => {
                    marker.classList.remove('active');
                    marker.classList.add('completed');
                });
                if (currentStageElement) {
                    currentStageElement.textContent = 'å®Œæˆ';
                }
            }
        }

        // æ›´æ–°æ€»é¢˜æ•°æ˜¾ç¤º
        function updateTotalQuestions() {
            const totalQuestionsElement = document.getElementById('totalQuestions');
            if (totalQuestionsElement) {
                totalQuestionsElement.textContent = totalQuestions;
            }
        }

        // ç”ŸæˆæŠ¥å‘Š
        function generateReport() {
            alert('æŠ¥å‘Šç”ŸæˆåŠŸèƒ½æ¼”ç¤º - åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šç”Ÿæˆè¯¦ç»†çš„PDFæŠ¥å‘Šï¼ŒåŒ…å«æ‰€æœ‰ç»´åº¦çš„åˆ†æç»“æœå’Œä¸ªæ€§åŒ–å»ºè®®');
        }

        // åˆ†äº«æŠ¥å‘Š
        function shareReport() {
            alert('åˆ†äº«åŠŸèƒ½æ¼”ç¤º - åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæä¾›å¤šç§åˆ†äº«æ–¹å¼ï¼Œå¦‚å¾®ä¿¡ã€é‚®ä»¶ç­‰');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
