<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深度剖析 - 综合健康评估 | AZ Ring智能健康戒指</title>
    <meta name="description" content="15-20分钟综合健康评估，包含体质、心理、生活方式全面分析，获得个性化健康报告。">
    
    <!-- 样式文件 -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.0.0/css/all.min.css">
    <!-- 本地Inter字体 -->
    <style>
        @font-face {
            font-family: 'Inter';
            font-style: normal;
            font-weight: 300 700;
            font-display: swap;
            src: url('../fonts/inter-variable.woff2') format('woff2');
        }
        
        :root {
            --oura-black: #0a0a0a;
            --oura-dark: #1a1a1a;
            --oura-gray: #2a2a2a;
            --oura-light-gray: #666666;
            --oura-white: #ffffff;
            --oura-accent: #ff6b35;
            --oura-accent-light: #ff8a65;
            --oura-blue: #4a90e2;
            --oura-green: #7ed321;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #4a90e2 0%, #6ba3f5 100%);
            color: white;
            line-height: 1.6;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }
        
        /* 全屏沉浸式容器 */
        .typeform-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            position: relative;
        }
        
        /* 圆形进度指示器 */
        .typeform-progress {
            position: fixed;
            top: 40px;
            right: 40px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            z-index: 100;
        }

        .progress-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(#ffffff 0deg, transparent 0deg);
            transition: background 0.6s ease;
        }

        .progress-text {
            position: relative;
            z-index: 2;
        }

        /* 阶段指示器 */
        .stage-indicators {
            position: fixed;
            top: 120px;
            right: 40px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 100;
        }

        .stage-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .stage-dot.active {
            background: white;
            transform: scale(1.2);
        }

        .stage-dot.completed {
            background: #7ed321;
        }
        
        /* 返回按钮 */
        .back-btn {
            position: fixed;
            top: 40px;
            left: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        /* 问题容器 */
        .question-slide {
            display: none;
            text-align: center;
            max-width: 900px;
            width: 100%;
            animation: fadeInUp 0.6s ease;
        }

        .question-slide.active {
            display: block;
        }

        /* 阶段信息 */
        .stage-info {
            margin-bottom: 30px;
        }

        .stage-title {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 20px;
        }

        .typeform-question {
            font-size: 48px;
            font-weight: 300;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .typeform-subtitle {
            font-size: 20px;
            opacity: 0.8;
            margin-bottom: 60px;
            font-weight: 300;
        }
        
        .section-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 8px;
        }
        
        .tab {
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            flex: 1;
            text-align: center;
        }
        
        .tab.active {
            background: var(--oura-blue);
            color: var(--oura-white);
        }
        
        .tab:not(.active) {
            color: var(--oura-light-gray);
        }
        
        .tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--oura-white);
        }
        
        .progress-section {
            margin-bottom: 40px;
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            margin-bottom: 16px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--oura-blue) 0%, #6ba3f5 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            text-align: center;
            color: var(--oura-light-gray);
            font-size: 14px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .question-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .question-number {
            color: var(--oura-blue);
            font-size: 14px;
            font-weight: 600;
        }
        
        .question-category {
            background: rgba(74, 144, 226, 0.2);
            color: var(--oura-blue);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .question-text {
            font-size: 22px;
            font-weight: 500;
            margin-bottom: 30px;
            line-height: 1.4;
        }
        
        .question-type {
            margin-bottom: 20px;
        }
        
        /* 评分量表 */
        .rating-scale {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0 60px;
            flex-wrap: wrap;
        }
        
        .rating-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 20px;
            border-radius: 16px;
            transition: transform 0.18s ease, box-shadow 0.18s ease;
            background: white;
            color: #333;
            min-width: 100px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            will-change: transform;
        }
        
        .rating-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.16);
        }
        
        .rating-item.selected {
            background: #fff5f0;
            border: 3px solid #4a90e2;
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(74, 144, 226, 0.25);
        }
        
        .rating-number {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 12px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background: white;
        }
        
        .rating-item.selected .rating-number {
            border-color: #4a90e2;
            background: #4a90e2;
            color: white;
        }

        .rating-label {
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            line-height: 1.3;
            color: #333;
        }
        
        .rating-label {
            font-size: 12px;
            text-align: center;
            color: var(--oura-light-gray);
        }
        
        .rating-item.selected .rating-label {
            color: #111;
        }
        
        /* 多选题 */
        .multiple-choice {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 40px 0 60px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .choice-option {
            background: white;
            color: #333;
            border: 3px solid transparent;
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .choice-option span {
            color: #333;
            font-weight: 600;
        }
        
        .choice-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }
        
        .choice-option.selected {
            background: #fff5f0;
            border-color: #4a90e2;
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(74, 144, 226, 0.3);
        }
        .choice-option.selected span { color: #111; }
        
        .choice-checkbox {
            width: 24px;
            height: 24px;
            border: 3px solid #ddd;
            border-radius: 6px;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .choice-option.selected .choice-checkbox {
            border-color: #4a90e2;
            background: #4a90e2;
        }
        
        .choice-option.selected .choice-checkbox::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--oura-white);
            font-size: 12px;
            font-weight: bold;
        }
        
        .slider-container {
            margin-bottom: 20px;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 20px;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--oura-blue);
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.4);
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            color: rgb(255, 255, 255);
            font-size: 14px;
        }
        
        .slider-value {
            text-align: center;
            margin-top: 16px;
            font-size: 18px;
            font-weight: 500;
            color: white;
        }
        
        /* 导航按钮 */
        .navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin-top: 40px;
        }

        .nav-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-button:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-button.primary {
            background: white;
            color: #4a90e2;
            border-color: white;
        }

        .nav-button.primary:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .nav-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-prev {
            background: rgba(255, 255, 255, 0.1);
            color: var(--oura-white);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-next {
            background: var(--oura-blue);
            color: var(--oura-white);
            border: 2px solid var(--oura-blue);
        }
        
        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .question-info {
            text-align: center;
            color: var(--oura-light-gray);
            font-size: 14px;
        }
        
        /* 结果页面样式 */
        .result-container {
            display: block;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 0 auto;
            max-width: 1000px;
        }
        
        .result-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .result-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--oura-blue);
        }
        
        .comprehensive-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .analysis-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .analysis-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .analysis-icon {
            font-size: 24px;
        }
        
        .analysis-content {
            color: var(--oura-light-gray);
            line-height: 1.6;
            margin-bottom: 16px;
        }
        
        .analysis-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .score-label {
            font-weight: 500;
        }
        
        .score-value {
            font-weight: 600;
            font-size: 18px;
        }
        
        .seasonal-calendar {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .calendar-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 24px;
            text-align: center;
        }
        
        .seasons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .season-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .season-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }
        
        .season-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .season-advice {
            color: var(--oura-light-gray);
            font-size: 14px;
            line-height: 1.5;
        }
        
        .health-prescription {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }
        
        .prescription-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .prescription-icon {
            font-size: 32px;
            margin-bottom: 16px;
        }
        
        .prescription-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .prescription-content {
            color: var(--oura-light-gray);
            line-height: 1.6;
        }
        
        .result-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary {
            background: var(--oura-blue);
            color: var(--oura-white);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--oura-white);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .section-tabs {
                flex-direction: column;
                gap: 8px;
            }
            
            .rating-scale {
                flex-wrap: wrap;
                gap: 12px;
            }
            
            .comprehensive-analysis {
                grid-template-columns: 1fr;
            }
            
            .health-prescription {
                grid-template-columns: 1fr;
            }
            
            .result-actions {
                flex-direction: column;
                align-items: center;
            }
        }

        /* 动画 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Typeform响应式设计 */
        @media (max-width: 768px) {
            .typeform-progress {
                top: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                font-size: 12px;
            }

            .stage-indicators {
                top: 90px;
                right: 20px;
            }

            .back-btn {
                top: 20px;
                left: 20px;
                padding: 10px 16px;
                font-size: 14px;
            }

            .typeform-question {
                font-size: 28px;
            }

            .typeform-subtitle {
                font-size: 16px;
                margin-bottom: 40px;
            }

            .rating-scale {
                gap: 12px;
            }

            .rating-item {
                min-width: 80px;
                padding: 16px;
            }

            .rating-number {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            .multiple-choice {
                grid-template-columns: 1fr;
            }

            .choice-option {
                padding: 16px;
                font-size: 14px;
            }

            .navigation {
                gap: 20px;
                margin-top: 40px;
            }

            .nav-button {
                padding: 14px 24px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="typeform-container">
        <!-- 进度指示器 -->
        <div class="typeform-progress">
            <div class="progress-circle" id="progressCircle"></div>
            <div class="progress-text" id="progressText">1/90</div>
        </div>

        <!-- 阶段指示器 -->
        <div class="stage-indicators">
            <div class="stage-dot active" data-stage="0"></div>
            <div class="stage-dot" data-stage="1"></div>
            <div class="stage-dot" data-stage="2"></div>
            <div class="stage-dot" data-stage="3"></div>
        </div>

        <!-- 返回按钮 -->
        <a href="health-tcm-constitution.html" class="back-btn">
            <i class="fas fa-arrow-left"></i>
            返回
        </a>

        <!-- 问题幻灯片 -->
        <div class="question-slide active" id="slide-0">
            <div class="stage-info">
                <div class="stage-title">第一阶段：体质分析</div>
                <h1 class="typeform-question">您的整体精神状态如何？</h1>
                <p class="typeform-subtitle">请根据您最近三个月的实际情况作答</p>
            </div>
            
            <div class="rating-scale" id="rating-0">
                <div class="rating-item" onclick="selectRating(0, 1)">
                    <div class="rating-number">1</div>
                    <div class="rating-label">很差</div>
                </div>
                <div class="rating-item" onclick="selectRating(0, 2)">
                    <div class="rating-number">2</div>
                    <div class="rating-label">较差</div>
                </div>
                <div class="rating-item" onclick="selectRating(0, 3)">
                    <div class="rating-number">3</div>
                    <div class="rating-label">一般</div>
                </div>
                <div class="rating-item" onclick="selectRating(0, 4)">
                    <div class="rating-number">4</div>
                    <div class="rating-label">较好</div>
                </div>
                <div class="rating-item" onclick="selectRating(0, 5)">
                    <div class="rating-number">5</div>
                    <div class="rating-label">很好</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-button" style="visibility: hidden;">
                    <i class="fas fa-arrow-left"></i>
                    上一题
                </button>
                <button class="nav-button primary" id="nextBtn" onclick="nextQuestion()" disabled>
                    下一题
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- 其他问题幻灯片将通过JavaScript动态生成 -->
        
        <div id="result" class="result-container hidden">
            <div class="result-header">
                <h2 class="result-title">您的综合健康分析报告</h2>
                <p style="color: var(--oura-light-gray); font-size: 18px;">基于多维度评估的个性化健康管理方案</p>
            </div>
            
            <div class="comprehensive-analysis" id="analysisCards">
                <!-- 分析卡片将通过JavaScript动态生成 -->
            </div>
            
            <div class="seasonal-calendar">
                <h3 class="calendar-title">🗓️ 四季调理日历</h3>
                <div class="seasons-grid" id="seasonsGrid">
                    <!-- 季节调理建议将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <div class="health-prescription" id="prescriptionCards">
                <!-- 健康处方将通过JavaScript动态生成 -->
            </div>
            
            <div class="result-actions">
                <button onclick="generatePDF()" class="action-btn btn-primary">
                    <i class="fas fa-file-pdf"></i>
                    生成PDF报告
                </button>
                <button onclick="shareResult()" class="action-btn btn-secondary">
                    <i class="fas fa-share-alt"></i>
                    分享结果
                </button>
                <a href="health-tcm-constitution.html" class="action-btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    返回体质测试
                </a>
            </div>
        </div>
    </div>

    <script>
        // 深度剖析问卷数据（90题）
        const questionSections = {
            constitution: {
                name: '体质分析',
                questions: [
                    { text: '您的整体精神状态如何？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您的睡眠质量如何？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您的食欲状况？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您的消化功能如何？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您的体力状况？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您对寒热的感受？', type: 'slider', min: 1, max: 5, labels: ['很怕冷', '一般', '很怕热'] },
                    { text: '您的出汗情况？', type: 'rating', labels: ['从不出汗', '很少', '正常', '容易出汗', '总是出汗'] },
                    { text: '您的大便情况？', type: 'rating', labels: ['很干', '较干', '正常', '偏稀', '很稀'] },
                    { text: '您的小便情况？', type: 'rating', labels: ['很清', '较清', '正常', '较黄', '很黄'] },
                    { text: '您的皮肤状态？', type: 'rating', labels: ['很干', '较干', '正常', '较油', '很油'] },
                    { text: '您的情绪状态？', type: 'rating', labels: ['很抑郁', '较抑郁', '一般', '较愉快', '很愉快'] },
                    { text: '您的记忆力如何？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您的注意力集中程度？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您对疾病的抵抗力？', type: 'rating', labels: ['很弱', '较弱', '一般', '较强', '很强'] },
                    { text: '您的恢复能力如何？', type: 'rating', labels: ['很慢', '较慢', '一般', '较快', '很快'] },
                    { text: '您有以下哪些症状？', type: 'multiple', options: ['头晕', '头痛', '胸闷', '心悸', '腰酸', '关节痛', '其他', '无症状'] },
                    { text: '您的体重变化情况？', type: 'rating', labels: ['明显偏瘦', '偏瘦', '正常', '偏胖', '明显超重'] },
                    { text: '您的血压状况？', type: 'rating', labels: ['偏低', '正常偏低', '正常', '正常偏高', '偏高'] },
                    { text: '您是否有慢性疾病？', type: 'multiple', options: ['高血压', '糖尿病', '心脏病', '胃病', '肝病', '肾病', '其他', '无'] },
                    { text: '您的家族病史？', type: 'multiple', options: ['心血管疾病', '糖尿病', '肿瘤', '精神疾病', '遗传病', '其他', '无'] }
                ]
            },
            lifestyle: {
                name: '生活方式',
                questions: [
                    { text: '您每天的睡眠时间？', type: 'rating', labels: ['<5小时', '5-6小时', '6-7小时', '7-8小时', '>8小时'] },
                    { text: '您的作息规律程度？', type: 'rating', labels: ['很不规律', '不太规律', '一般', '比较规律', '非常规律'] },
                    { text: '您每周运动几次？', type: 'rating', labels: ['0次', '1-2次', '3-4次', '5-6次', '每天'] },
                    { text: '您每次运动时长？', type: 'rating', labels: ['<15分钟', '15-30分钟', '30-45分钟', '45-60分钟', '>60分钟'] },
                    { text: '您偏好的运动类型？', type: 'multiple', options: ['有氧运动', '力量训练', '瑜伽', '球类运动', '户外运动', '游泳', '其他', '不运动'] },
                    { text: '您的饮食规律程度？', type: 'rating', labels: ['很不规律', '不太规律', '一般', '比较规律', '非常规律'] },
                    { text: '您每天喝水量？', type: 'rating', labels: ['<1L', '1-1.5L', '1.5-2L', '2-2.5L', '>2.5L'] },
                    { text: '您的饮食偏好？', type: 'multiple', options: ['油腻食物', '辛辣食物', '甜食', '生冷食物', '清淡食物', '温热食物', '其他'] },
                    { text: '您是否吸烟？', type: 'rating', labels: ['从不', '偶尔', '少量', '中等', '大量'] },
                    { text: '您是否饮酒？', type: 'rating', labels: ['从不', '偶尔', '少量', '中等', '大量'] },
                    { text: '您每天屏幕使用时间？', type: 'rating', labels: ['<2小时', '2-4小时', '4-6小时', '6-8小时', '>8小时'] },
                    { text: '您的工作性质？', type: 'multiple', options: ['久坐', '久站', '体力劳动', '脑力劳动', '夜班', '出差', '其他'] },
                    { text: '您的工作压力程度？', type: 'rating', labels: ['无压力', '轻微', '一般', '较大', '很大'] },
                    { text: '您的居住环境？', type: 'multiple', options: ['空气清新', '噪音较大', '湿度适宜', '过于干燥', '过于潮湿', '采光良好', '其他'] },
                    { text: '您的社交活动频率？', type: 'rating', labels: ['很少', '较少', '一般', '较多', '很多'] },
                    { text: '您的娱乐休闲方式？', type: 'multiple', options: ['看书', '听音乐', '看电影', '游戏', '旅行', '聚会', '其他'] },
                    { text: '您的学习进修情况？', type: 'rating', labels: ['从不', '很少', '偶尔', '经常', '持续'] },
                    { text: '您对健康的关注程度？', type: 'rating', labels: ['不关注', '较少关注', '一般', '比较关注', '非常关注'] },
                    { text: '您是否定期体检？', type: 'rating', labels: ['从不', '很少', '偶尔', '每年', '每半年'] },
                    { text: '您的保健习惯？', type: 'multiple', options: ['服用保健品', '中医调理', '按摩', '泡脚', '冥想', '其他', '无'] }
                ]
            },
            psychology: {
                name: '心理状态',
                questions: [
                    { text: '您最近的整体心情如何？', type: 'rating', labels: ['很糟糕', '较差', '一般', '较好', '很好'] },
                    { text: '您是否容易焦虑？', type: 'rating', labels: ['从不', '很少', '偶尔', '经常', '总是'] },
                    { text: '您是否容易抑郁？', type: 'rating', labels: ['从不', '很少', '偶尔', '经常', '总是'] },
                    { text: '您的压力承受能力？', type: 'rating', labels: ['很弱', '较弱', '一般', '较强', '很强'] },
                    { text: '您的情绪控制能力？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您是否容易发脾气？', type: 'rating', labels: ['从不', '很少', '偶尔', '经常', '总是'] },
                    { text: '您对未来的态度？', type: 'rating', labels: ['很悲观', '较悲观', '一般', '较乐观', '很乐观'] },
                    { text: '您的自信程度？', type: 'rating', labels: ['很缺乏', '较缺乏', '一般', '较自信', '很自信'] },
                    { text: '您的人际关系状况？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您是否感到孤独？', type: 'rating', labels: ['从不', '很少', '偶尔', '经常', '总是'] },
                    { text: '您的工作满意度？', type: 'rating', labels: ['很不满意', '不太满意', '一般', '比较满意', '非常满意'] },
                    { text: '您的生活满意度？', type: 'rating', labels: ['很不满意', '不太满意', '一般', '比较满意', '非常满意'] },
                    { text: '您是否有以下心理症状？', type: 'multiple', options: ['失眠', '多梦', '健忘', '注意力不集中', '易怒', '心悸', '其他', '无'] },
                    { text: '您的应对压力方式？', type: 'multiple', options: ['运动', '倾诉', '独处', '购物', '饮食', '睡觉', '其他'] },
                    { text: '您是否有心理咨询经历？', type: 'rating', labels: ['从无', '很少', '偶尔', '定期', '经常'] },
                    { text: '您的性格特点？', type: 'multiple', options: ['内向', '外向', '敏感', '理性', '感性', '完美主义', '其他'] },
                    { text: '您的兴趣爱好丰富程度？', type: 'rating', labels: ['很少', '较少', '一般', '较多', '很多'] },
                    { text: '您对生活的热情程度？', type: 'rating', labels: ['很低', '较低', '一般', '较高', '很高'] },
                    { text: '您的目标明确程度？', type: 'rating', labels: ['很模糊', '较模糊', '一般', '较明确', '很明确'] },
                    { text: '您的幸福感水平？', type: 'rating', labels: ['很低', '较低', '一般', '较高', '很高'] }
                ]
            },
            environment: {
                name: '环境适应',
                questions: [
                    { text: '您对季节变化的敏感程度？', type: 'rating', labels: ['不敏感', '较不敏感', '一般', '较敏感', '很敏感'] },
                    { text: '您最不适应的季节？', type: 'multiple', options: ['春季', '夏季', '秋季', '冬季', '都适应'] },
                    { text: '您对温度变化的适应能力？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您对湿度变化的敏感程度？', type: 'rating', labels: ['不敏感', '较不敏感', '一般', '较敏感', '很敏感'] },
                    { text: '您对空气质量的敏感程度？', type: 'rating', labels: ['不敏感', '较不敏感', '一般', '较敏感', '很敏感'] },
                    { text: '您对噪音的敏感程度？', type: 'rating', labels: ['不敏感', '较不敏感', '一般', '较敏感', '很敏感'] },
                    { text: '您对光线的敏感程度？', type: 'rating', labels: ['不敏感', '较不敏感', '一般', '较敏感', '很敏感'] },
                    { text: '您在不同地理环境的适应能力？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您对时差的适应能力？', type: 'rating', labels: ['很差', '较差', '一般', '较好', '很好'] },
                    { text: '您在人群密集场所的感受？', type: 'rating', labels: ['很不适', '不太适', '一般', '比较适', '很适应'] },
                    { text: '您对新环境的适应速度？', type: 'rating', labels: ['很慢', '较慢', '一般', '较快', '很快'] },
                    { text: '您偏好的居住环境？', type: 'multiple', options: ['城市', '郊区', '乡村', '海边', '山区', '其他'] },
                    { text: '您对工作环境的要求？', type: 'multiple', options: ['安静', '明亮', '通风', '温度适宜', '人少', '其他'] },
                    { text: '您是否有环境过敏？', type: 'multiple', options: ['花粉', '灰尘', '动物毛发', '化学物质', '食物', '其他', '无'] },
                    { text: '您对电子设备辐射的敏感程度？', type: 'rating', labels: ['不敏感', '较不敏感', '一般', '较敏感', '很敏感'] },
                    { text: '您在封闭空间的感受？', type: 'rating', labels: ['很不适', '不太适', '一般', '比较适', '很适应'] },
                    { text: '您对自然环境的需求程度？', type: 'rating', labels: ['不需要', '较少需要', '一般', '比较需要', '非常需要'] },
                    { text: '您的环境适应策略？', type: 'multiple', options: ['主动调节', '被动适应', '改变环境', '寻求帮助', '其他'] },
                    { text: '您对居住地的满意度？', type: 'rating', labels: ['很不满意', '不太满意', '一般', '比较满意', '非常满意'] },
                    { text: '您认为环境对健康的影响程度？', type: 'rating', labels: ['很小', '较小', '一般', '较大', '很大'] }
                ]
            }
        };

        let currentSection = 'constitution';
        let currentQuestionIndex = 0;
        let currentQuestion = 0; // 全局问题索引
        let allQuestions = []; // 扁平化后的所有问题
        let answers = []; // 改为数组结构，与其他页面保持一致
        let totalQuestions = 0;

        // 检查答案完整性并启用/禁用按钮
        function checkAnswerCompleteness(questionIndex) {
            try {
                const question = allQuestions[questionIndex];
                if (!question) {
                    // console.warn('问题不存在:', questionIndex);
                    return false;
                }
                
                const answer = answers[questionIndex];
                let isComplete = false;
                
                // 根据题目类型判断完整性
                if (question.type === 'rating') {
                    // 评分题目：答案应该是1-5的数字
                    isComplete = (answer != null && answer >= 1 && answer <= 5);
                } else if (question.type === 'multiple') {
                    // 多选题目：答案应该是非空数组
                    isComplete = (Array.isArray(answer) && answer.length > 0);
                } else {
                    // 其他类型：答案非空即可
                    isComplete = (answer != null && answer !== undefined);
                }
                
                // 更新按钮状态
                const nextBtn = document.querySelector(`#slide-${questionIndex} .nav-button.primary`);
                if (nextBtn) {
                    nextBtn.disabled = !isComplete;
                    // console.log(`[深度剖析] 问题${questionIndex + 1}按钮状态:`, { questionType: question.type, answer, isComplete, buttonDisabled: nextBtn.disabled });
                }
                
                return isComplete;
            } catch (error) {
                console.error('检查答案完整性时出错:', error);
                return false;
            }
        }

        // 隐藏问卷相关元素但保持容器可见
        function hideQuestionnaireElements() {
            try {
                // 隐藏进度指示器
                const progress = document.querySelector('.typeform-progress');
                if (progress) progress.style.display = 'none';
                
                // 隐藏阶段指示器
                const stageIndicators = document.querySelector('.stage-indicators');
                if (stageIndicators) stageIndicators.style.display = 'none';
                
                // 隐藏返回按钮
                const backBtn = document.querySelector('.back-btn');
                if (backBtn) backBtn.style.display = 'none';
                
                // 隐藏所有问题幻灯片
                const slides = document.querySelectorAll('.question-slide');
                slides.forEach(slide => {
                    slide.style.display = 'none';
                });
                
                // console.log('[深度剖析] 问卷元素已隐藏');
            } catch (error) {
                console.error('隐藏问卷元素时出错:', error);
            }
        }

        // 计算总题数
        Object.values(questionSections).forEach(section => {
            totalQuestions += section.questions.length;
        });

        // 扁平化所有问题
        function flattenQuestions() {
            allQuestions = [];
            let stageIndex = 0;
            Object.keys(questionSections).forEach(sectionKey => {
                const section = questionSections[sectionKey];
                section.questions.forEach((question, index) => {
                    allQuestions.push({
                        ...question,
                        section: sectionKey,
                        sectionName: section.name,
                        stage: stageIndex,
                        originalIndex: index
                    });
                });
                stageIndex++;
            });
        }

        // 初始化
        function init() {
            flattenQuestions();
            generateSlides();
            updateProgress();
            updateStageIndicators();
        }

        // 生成问题幻灯片
        function generateSlides() {
            const container = document.querySelector('.typeform-container');
            
            for (let i = 1; i < allQuestions.length; i++) {
                const question = allQuestions[i];
                const slide = document.createElement('div');
                slide.className = 'question-slide';
                slide.id = `slide-${i}`;
                
                const stageNames = ['第一阶段：体质分析', '第二阶段：生活方式', '第三阶段：心理状态', '第四阶段：环境适应'];
                
                slide.innerHTML = `
                    <div class="stage-info">
                        <div class="stage-title">${stageNames[question.stage]}</div>
                        <h1 class="typeform-question">${question.text}</h1>
                        <p class="typeform-subtitle">请根据您最近三个月的实际情况作答</p>
                    </div>
                    
                    ${generateQuestionHTML(question, i)}

                    <div class="navigation">
                        <button class="nav-button" onclick="prevQuestion()">
                            <i class="fas fa-arrow-left"></i>
                            上一题
                        </button>
                        <button class="nav-button primary" onclick="nextQuestion()" disabled>
                            ${i === allQuestions.length - 1 ? '查看结果' : '下一题'}
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                `;
                
                container.insertBefore(slide, document.getElementById('result'));
            }
        }

        // 生成问题HTML内容
        function generateQuestionHTML(question, questionIndex) {
            switch (question.type) {
                case 'rating':
                    return `
                        <div class="rating-scale" id="rating-${questionIndex}">
                            ${question.labels.map((label, index) => `
                                <div class="rating-item" onclick="selectRating(${questionIndex}, ${index + 1})">
                                    <div class="rating-number">${index + 1}</div>
                                    <div class="rating-label">${label}</div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                case 'multiple':
                    return `
                        <div class="multiple-choice" id="multiple-${questionIndex}">
                            ${question.options.map((option, index) => `
                                <div class="choice-option" onclick="toggleChoice(${questionIndex}, ${index})">
                                    <div class="choice-checkbox"></div>
                                    <span>${option}</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                case 'slider':
                    return generateSlider(question, questionIndex);
                default:
                    // console.warn('未支持的题目类型:', question.type);
                    return ``;
            }
        }

        // 选择评分
        function selectRating(questionIndex, rating) {
            try {
                // 确保答案数组足够长
                while (answers.length <= questionIndex) {
                    answers.push(null);
                }
                answers[questionIndex] = rating;
                
                // 更新选项样式
                const ratingItems = document.querySelectorAll(`#slide-${questionIndex} .rating-item`);
                ratingItems.forEach((item, index) => {
                    item.classList.toggle('selected', index === rating - 1);
                });
                
                // 使用统一的按钮检查逻辑
                checkAnswerCompleteness(questionIndex);
                
                // console.log(`[深度剖析] 评分选择:`, {questionIndex, rating, answers: answers});
            } catch (error) {
                console.error('选择评分时出错:', error);
            }
        }

        // 切换多选项
        function toggleChoice(questionIndex, choiceIndex) {
            try {
                // 确保答案数组足够长
                while (answers.length <= questionIndex) {
                    answers.push(null);
                }
                
                // 如果当前问题还没有答案，初始化为数组
                if (!Array.isArray(answers[questionIndex])) {
                    answers[questionIndex] = [];
                }
                
                const choiceArray = answers[questionIndex];
                const choiceExists = choiceArray.includes(choiceIndex);
                
                if (choiceExists) {
                    answers[questionIndex] = choiceArray.filter(c => c !== choiceIndex);
                } else {
                    answers[questionIndex].push(choiceIndex);
                }
                
                // 更新选项样式
                const choiceOption = document.querySelector(`#slide-${questionIndex} .choice-option:nth-child(${choiceIndex + 1})`);
                if (choiceOption) {
                    choiceOption.classList.toggle('selected', !choiceExists);
                }
                
                // 使用统一的按钮检查逻辑
                checkAnswerCompleteness(questionIndex);
                
                // console.log(`[深度剖析] 多选切换:`, {questionIndex, choiceIndex, answers: answers});
            } catch (error) {
                console.error('切换多选项时出错:', error);
            }
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestion < allQuestions.length - 1) {
                // 隐藏当前问题
                document.getElementById(`slide-${currentQuestion}`).classList.remove('active');
                
                currentQuestion++;
                
                // 显示下一题
                document.getElementById(`slide-${currentQuestion}`).classList.add('active');
                
                updateProgress();
                updateStageIndicators();
            } else {
                // 显示结果
                document.getElementById(`slide-${currentQuestion}`).classList.remove('active');
                showResult();
            }
        }

        // 上一题
        function prevQuestion() {
            if (currentQuestion > 0) {
                // 隐藏当前问题
                document.getElementById(`slide-${currentQuestion}`).classList.remove('active');
                
                currentQuestion--;
                
                // 显示上一题
                document.getElementById(`slide-${currentQuestion}`).classList.add('active');
                
                updateProgress();
                updateStageIndicators();
            }
        }

        // 更新进度
        function updateProgress() {
            const progress = ((currentQuestion + 1) / allQuestions.length) * 100;
            const progressCircle = document.getElementById('progressCircle');
            const progressText = document.getElementById('progressText');
            
            if (progressCircle && progressText) {
                progressCircle.style.background = `conic-gradient(#ffffff ${progress * 3.6}deg, transparent ${progress * 3.6}deg)`;
                progressText.textContent = `${currentQuestion + 1}/${allQuestions.length}`;
            }
        }

        // 更新阶段指示器
        function updateStageIndicators() {
            const currentStageIndex = allQuestions[currentQuestion]?.stage || 0;
            const stageDots = document.querySelectorAll('.stage-dot');
            
            stageDots.forEach((dot, index) => {
                dot.classList.remove('active', 'completed');
                if (index < currentStageIndex) {
                    dot.classList.add('completed');
                } else if (index === currentStageIndex) {
                    dot.classList.add('active');
                }
            });
        }

        // 显示结果
        function showResult() {
            try {
                // console.log('[深度剖析] 开始显示结果', {answersLength: answers.length, answers: answers});
                
                // 隐藏问卷相关元素，但保持容器可见
                hideQuestionnaireElements();
                
                const resultContainer = document.getElementById('result');
                if (resultContainer) {
                    resultContainer.classList.remove('hidden');
                    resultContainer.style.display = 'block'; // 确保显示
                } else {
                    throw new Error('结果容器未找到');
                }
                
                // 生成综合分析
                generateComprehensiveAnalysis();
                
                // 生成季节调理日历
                generateSeasonalCalendar();
                
                // 生成健康处方
                generateHealthPrescription();
                
                // 保存结果
                saveResult();
                
                // console.log('[深度剖析] 结果显示完成');
                
            } catch (error) {
                console.error('[深度剖析] 显示结果时出错:', error);
                alert('生成分析结果时出现错误，请重试。错误信息：' + error.message);
            }
        }

        // 更新问题显示（保留原有函数以兼容）
        function updateQuestion() {
            
            if (!question) return;
            
            // 计算全局问题编号
            let globalIndex = 0;
            Object.keys(questionSections).forEach(sectionKey => {
                if (sectionKey === currentSection) {
                    globalIndex += currentQuestionIndex + 1;
                    return;
                }
                if (Object.keys(questionSections).indexOf(sectionKey) < Object.keys(questionSections).indexOf(currentSection)) {
                    globalIndex += questionSections[sectionKey].questions.length;
                }
            });
            
            document.getElementById('questionNumber').textContent = `第 ${globalIndex} 题`;
            document.getElementById('questionCategory').textContent = section.name;
            document.getElementById('questionText').textContent = question.text;
            
            // 生成问题内容
            const questionType = document.getElementById('questionType');
            questionType.innerHTML = generateQuestionContent(question, currentSection, currentQuestionIndex);
            
            // 更新按钮状态
            updateNavigationButtons();
        }

        // 生成问题内容
        function generateQuestionContent(question, sectionKey, questionIndex) {
            const savedAnswer = answers[sectionKey][questionIndex];
            
            switch (question.type) {
                case 'rating':
                    return generateRatingScale(question, savedAnswer);
                case 'multiple':
                    return generateMultipleChoice(question, savedAnswer);
                case 'slider':
                    return generateSlider(question, savedAnswer);
                default:
                    return '';
            }
        }

        // 生成评分量表
        function generateRatingScale(question, savedAnswer) {
            let html = '<div class="rating-scale">';
            question.labels.forEach((label, index) => {
                const selected = savedAnswer === index ? 'selected' : '';
                html += `
                    <div class="rating-item ${selected}" onclick="selectRating(${index})">
                        <div class="rating-number">${index + 1}</div>
                        <div class="rating-label">${label}</div>
                    </div>
                `;
            });
            html += '</div>';
            return html;
        }

        // 生成多选题
        function generateMultipleChoice(question, savedAnswer) {
            let html = '<div class="multiple-choice">';
            question.options.forEach((option, index) => {
                const selected = savedAnswer && savedAnswer.includes(index) ? 'selected' : '';
                html += `
                    <div class="choice-option ${selected}" onclick="toggleChoice(${index})">
                        <div class="choice-checkbox"></div>
                        <span>${option}</span>
                    </div>
                `;
            });
            html += '</div>';
            return html;
        }

        // 生成滑动条
        function generateSlider(question, questionIndex) {
            const min = typeof question.min === 'number' ? question.min : 1;
            const max = typeof question.max === 'number' ? question.max : 5;
            const current = (answers[questionIndex] != null) ? Number(answers[questionIndex]) : 3;
            const labels = Array.isArray(question.labels) && question.labels.length >= 3
                ? question.labels
                : ['很怕冷', '一般', '很怕热'];
            const displayLabel = (current <= 2) ? labels[0] : (current === 3 ? labels[1] : labels[2]);
            return `
                <div class="slider-container">
                    <input type="range" min="${min}" max="${max}" value="${current}" class="slider" oninput="selectSlider(${questionIndex}, this.value)" onchange="selectSlider(${questionIndex}, this.value)">
                    <div class="slider-labels">
                        <span>${labels[0]}</span>
                        <span>${labels[1]}</span>
                        <span>${labels[2]}</span>
                    </div>
                    <div class="slider-value">${displayLabel}</div>
                </div>
            `;
        }

        // 选择滑动条值
        function selectSlider(questionIndex, value) {
            try {
                const num = parseInt(value);
                while (answers.length <= questionIndex) {
                    answers.push(null);
                }
                answers[questionIndex] = num;
                const question = allQuestions[questionIndex];
                const labels = (question && Array.isArray(question.labels) && question.labels.length >= 3)
                    ? question.labels
                    : ['很怕冷', '一般', '很怕热'];
                const displayLabel = (num <= 2) ? labels[0] : (num === 3 ? labels[1] : labels[2]);
                const sliderValueEl = document.querySelector(`#slide-${questionIndex} .slider-value`);
                if (sliderValueEl) sliderValueEl.textContent = displayLabel;
                // 统一按钮启用检查
                checkAnswerCompleteness(questionIndex);
                // console.log('[深度剖析] 滑动条选择:', { questionIndex, value: num, displayLabel });
            } catch (error) {
                console.error('选择滑动条值时出错:', error);
            }
        }








        // 生成综合分析
        function generateComprehensiveAnalysis() {
            const container = document.getElementById('analysisCards');
            
            const analyses = [
                {
                    icon: '🏥',
                    title: '体质健康指数',
                    content: '基于您的体质分析，整体健康状况良好。建议继续保持均衡的生活方式。',
                    score: '85分'
                },
                {
                    icon: '🏃',
                    title: '生活方式评估',
                    content: '您的运动和饮食习惯基本健康，建议增加户外活动时间。',
                    score: '78分'
                },
                {
                    icon: '🧠',
                    title: '心理健康状态',
                    content: '心理状态相对稳定，适度的压力管理有助于提升整体健康。',
                    score: '82分'
                },
                {
                    icon: '🌍',
                    title: '环境适应能力',
                    content: '对环境变化的适应能力较强，注意季节性调理。',
                    score: '80分'
                }
            ];

            container.innerHTML = analyses.map(analysis => `
                <div class="analysis-card">
                    <div class="analysis-title">
                        <span class="analysis-icon">${analysis.icon}</span>
                        ${analysis.title}
                    </div>
                    <div class="analysis-content">${analysis.content}</div>
                    <div class="analysis-score">
                        <span class="score-label">综合评分</span>
                        <span class="score-value" style="color: var(--oura-blue);">${analysis.score}</span>
                    </div>
                </div>
            `).join('');
        }

        // 生成季节调理日历
        function generateSeasonalCalendar() {
            const container = document.getElementById('seasonsGrid');
            
            const seasons = [
                {
                    icon: '🌸',
                    name: '春季调理',
                    advice: '养肝护肝，多食绿色蔬菜，适当运动，保持心情舒畅。'
                },
                {
                    icon: '☀️',
                    name: '夏季调理',
                    advice: '养心安神，清热解暑，多食清淡食物，避免过度出汗。'
                },
                {
                    icon: '🍂',
                    name: '秋季调理',
                    advice: '润肺养阴，多食白色食物，注意保湿，预防秋燥。'
                },
                {
                    icon: '❄️',
                    name: '冬季调理',
                    advice: '温肾助阳，多食温热食物，注意保暖，适当进补。'
                }
            ];

            container.innerHTML = seasons.map(season => `
                <div class="season-card">
                    <div class="season-icon">${season.icon}</div>
                    <div class="season-name">${season.name}</div>
                    <div class="season-advice">${season.advice}</div>
                </div>
            `).join('');
        }

        // 生成健康处方
        function generateHealthPrescription() {
            const container = document.getElementById('prescriptionCards');
            
            const prescriptions = [
                {
                    icon: '🥗',
                    title: '营养处方',
                    content: '建议增加优质蛋白质摄入，多食用新鲜蔬果，控制精制糖分摄入。每日饮水量保持在2000ml左右。'
                },
                {
                    icon: '🏃',
                    title: '运动处方',
                    content: '推荐每周进行3-4次中等强度有氧运动，每次30-45分钟。可选择快走、游泳、瑜伽等。'
                },
                {
                    icon: '😴',
                    title: '睡眠处方',
                    content: '保持规律作息，每晚11点前入睡，保证7-8小时睡眠。睡前避免使用电子设备。'
                },
                {
                    icon: '🧘',
                    title: '心理处方',
                    content: '建议每日进行10-15分钟冥想或深呼吸练习，培养积极心态，适时寻求社会支持。'
                },
                {
                    icon: '🌿',
                    title: '中医调理',
                    content: '根据体质特点，建议适当使用调理茶饮，如玫瑰花茶、枸杞茶等。可咨询中医师进行个性化调理。'
                },
                {
                    icon: '🏥',
                    title: '健康监测',
                    content: '建议每半年进行一次全面体检，定期监测血压、血糖等指标。使用智能设备监测日常健康数据。'
                }
            ];

            container.innerHTML = prescriptions.map(prescription => `
                <div class="prescription-card">
                    <div class="prescription-icon">${prescription.icon}</div>
                    <div class="prescription-title">${prescription.title}</div>
                    <div class="prescription-content">${prescription.content}</div>
                </div>
            `).join('');
        }

        // 保存结果
        function saveResult() {
            const result = {
                answers: answers,
                timestamp: new Date().toISOString(),
                type: 'deep'
            };
            
            localStorage.setItem('deepAssessmentResult', JSON.stringify(result));
        }

        // 生成PDF报告
        function generatePDF() {
            alert('PDF报告生成功能正在开发中，敬请期待！');
        }

        // 分享结果
        function shareResult() {
            const shareText = '我刚完成了综合健康深度剖析！获得了个性化的健康管理方案，包含营养、运动、睡眠等多维度建议。快来测测你的健康状况吧！';
            
            if (navigator.share) {
                navigator.share({
                    title: '综合健康深度剖析结果',
                    text: shareText,
                    url: window.location.origin + '/blog/health-deep.html'
                });
            } else {
                navigator.clipboard.writeText(shareText + '\n' + window.location.href).then(() => {
                    alert('结果已复制到剪贴板！');
                });
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
